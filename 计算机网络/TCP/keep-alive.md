在双方长时间未通讯时，如何得知对方还活着？如何得知这个TCP连接是健康且具有通讯能力的？

TCP的保活机制就是用来解决此类问题，这个机制我们也可以称作：keepalive。保活机制默认是关闭的，TCP连接的任何一方都可打开此功能。有三个主要配置参数用来控制保活功能
系统级：保活时间tcp_keepalive_time、探测时间间隔tcp_keepalive_intvl、探测循环次数tcp_keepalive_probes。
保活时间（tcp_keepalive_time）默认7200秒，保活时间间隔（tcp_keepalive_intvl）默认75秒，探测循环次数（tcp_keepalive_probes）默认9次
默认情况下一条TCP连接在2小时（7200秒）都没有报文交换后，会开始进行保活探测，若再经过9*75秒=11分钟15秒的循环探测都未收到探测响应，即共计：2小时11分钟15秒后会自动断开TCP连接。
单条socket：保活时间TCP_KEEPIDLE、保活探测时间间隔TCP_KEEPINTVL、探测循环次数TCP_KEEPCNT
是由 TCP 层（内核态） 实现的
如果在一段时间（保活时间：tcp_keepalive_time）内此连接都不活跃，开启保活功能的一端会向对端发送一个保活探测报文

若对端正常存活，且连接有效，对端必然能收到探测报文并进行响应。此时，发送端收到响应报文则证明TCP连接正常，重置保活时间计数器即可
在探测过程中，对端主机会处于以下四种状态之一：
状态处理对方主机仍在工作，并且可达TCP连接正常，将保活计时器重置。对方主机已崩溃，包括：已关闭或者正在重TCP连接不正常，经过指定次数的探测依然没得到响应，则启断开连接重启后原连接已失效，对方由于不认识探测报文，会响应重对方主机崩溃并且已经重启置报文段，请求端将连接断开对方主机仍在工作，但由于某些原因不可达TCP连接不正常，经过指定次数的探测依然没得到响应，则（如：网络原因）断开连接
