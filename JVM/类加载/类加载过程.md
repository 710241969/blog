# 加载过程
JVM不是一开始就把所有的类都加载进内存中，而是只有第一次遇到某个需要运行的类时才会加载，且只加载一次
java 文件编译后， JVM 类加载机制分为五个部分：加载，连接（包括：验证，准备，解析），初始化，使用，卸载

## 1. 编译
即把我们写好的java文件，通过javac命令编译成字节码，也就是我们常说的.class文件
类加载过程即是指JVM虚拟机把.class文件中类信息加载进内存，并进行解析生成对应的class对象的过程

## 2.加载过程
![[Pasted image 20230509154820.png]]

### 加载
**加载**是**类加载**过程中的一个阶段，这个阶段会在内存中生成一个代表这个类的 java.lang.Class 对象，作为方法区这个类的各种数据的入口
将 class 文件字节码内容加载到内存中，并将这些**静态数据**转换成**方法区**中的**运行时数据结构**，在**堆**中生成一个代表这个类的java.lang.Class对象，作为方法区类数据的**访问入口**，这个过程需要[[[类加载器]]]参与


**Class对象封装了类在方法区内的数据结构，并且向Java程序员提供了访问方法区内的数据结构的接口**
1. 通过一个类的全限定名获取类的二进制字节流
2. 将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构
3. 在内存中生成一个代表这个类的 java.lang.Class 对象，作为方法区这个类的各种数据的访问入口


4. ZIP包读取，如jar包，war包
5. 从网络读取
6. 运行时生成，动态代理
7. 其他文件生成，如jsp文件生成对应的class类

### 验证
确保 Class 文件的字节流中包含的信息是否符合当前虚拟机的要求，并且不会危害虚拟机自身的安全
1. 文件格式验证
2. 元数据验证
3. 字节码验证
4. 符号引用验证

### 准备
正式为**类变量**分配内存并设置类变量的初始值阶段，在方法区中分配这些变量所使用的内存空间
如
```java
public static int v = 123;
```
在准备阶段过后的初始值为 0，在初始化阶段才会赋值
但如果是**类常量**
```java
public static final int v = 123;
```
则在准备阶段就会赋值为123

### 解析

### 初始化


